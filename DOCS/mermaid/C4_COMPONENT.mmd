---
title: PoDebateRap - Component Diagram (C4 Level 3)
---
C4Component
    title Component Diagram for PoDebateRap API

    Container_Boundary(api, "ASP.NET Core API") {
        Component(debateController, "DebateController", "API Controller", "Manages debate lifecycle: start, current state, audio status, reset")
        Component(rappersController, "RappersController", "API Controller", "Retrieves rapper profiles, updates win/loss records")
        Component(topicsController, "TopicsController", "API Controller", "Provides debate topics and random topic selection")
        Component(newsController, "NewsController", "API Controller", "Fetches trending news headlines for topics")
        Component(diagnosticsController, "DiagnosticsController", "API Controller", "System health checks and diagnostics")
        
        Component(debateOrchestrator, "DebateOrchestrator", "Service", "Coordinates the entire debate flow: turns, verses, audio, judging")
        Component(azureOpenAIService, "AzureOpenAIService", "Service", "Generates rap verses using GPT-4 with rapper personas")
        Component(textToSpeechService, "TextToSpeechService", "Service", "Converts verses to audio using Azure Speech")
        Component(newsService, "NewsService", "Service", "Integrates with NewsAPI for trending topics")
        Component(tableStorageService, "TableStorageService", "Service", "Persists data to Azure Table Storage")
        Component(rapperRepository, "RapperRepository", "Repository", "Manages rapper data and statistics")
        Component(debateMetrics, "DebateMetrics", "Telemetry", "OpenTelemetry metrics for monitoring")
        
        Component(debateHub, "DebateHub", "SignalR Hub", "Broadcasts real-time debate updates to clients")
    }

    Rel(debateController, debateOrchestrator, "Uses")
    Rel(rappersController, rapperRepository, "Uses")
    Rel(newsController, newsService, "Uses")
    Rel(diagnosticsController, tableStorageService, "Uses")
    
    Rel(debateOrchestrator, azureOpenAIService, "Generate verses")
    Rel(debateOrchestrator, textToSpeechService, "Generate audio")
    Rel(debateOrchestrator, rapperRepository, "Get rappers")
    Rel(debateOrchestrator, debateHub, "Broadcast updates")
    Rel(debateOrchestrator, debateMetrics, "Record metrics")
    
    Rel(rapperRepository, tableStorageService, "Persist data")

    UpdateLayoutConfig($c4ShapeInRow="4", $c4BoundaryInRow="1")
