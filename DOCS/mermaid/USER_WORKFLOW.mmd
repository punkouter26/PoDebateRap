---
title: PoDebateRap - User Workflow Diagram
---
flowchart TD
    subgraph UserActions["ðŸ‘¤ User Actions"]
        Start([ðŸ  Open App]) --> SelectRappers[ðŸŽ­ Select Two Rappers]
        SelectRappers --> ChooseTopic{ðŸ“‹ Choose Topic}
        ChooseTopic -->|Custom| EnterCustom[âœï¸ Enter Custom Topic]
        ChooseTopic -->|Trending| FetchNews[ðŸ“° Load News Headlines]
        ChooseTopic -->|Random| GetRandom[ðŸŽ² Get Random Topic]
        EnterCustom --> StartBattle
        FetchNews --> SelectHeadline[ðŸ“Œ Select Headline]
        SelectHeadline --> StartBattle
        GetRandom --> StartBattle[âš”ï¸ Click START BATTLE]
    end

    subgraph DebateFlow["ðŸŽ¤ Debate Flow"]
        StartBattle --> InitDebate[ðŸ”„ Initialize Debate]
        InitDebate --> TurnLoop{ðŸ” Turn Loop}
        
        TurnLoop -->|Turn 1-10| GenerateVerse[ðŸ¤– AI Generates Verse]
        GenerateVerse --> ConvertTTS[ðŸ”Š Convert to Speech]
        ConvertTTS --> PlayAudio[â–¶ï¸ Play Audio]
        PlayAudio --> ShowVerse[ðŸ“œ Display Verse]
        ShowVerse --> CrowdReaction[ðŸŽ† Crowd Reaction Animation]
        CrowdReaction --> AudioComplete{ðŸ”‡ Audio Done?}
        AudioComplete -->|Yes| NextTurn{More Turns?}
        NextTurn -->|Yes| TurnLoop
        NextTurn -->|No, Turn 10 Complete| JudgeDebate
    end

    subgraph Judging["âš–ï¸ Judgment Phase"]
        JudgeDebate[ðŸ§‘â€âš–ï¸ AI Judge Analyzes] --> DetermineWinner[ðŸ† Determine Winner]
        DetermineWinner --> UpdateLeaderboard[ðŸ“Š Update Leaderboard]
        UpdateLeaderboard --> ShowResults[ðŸ“‹ Display Results & Reasoning]
    end

    subgraph PostDebate["ðŸ”„ Post-Debate"]
        ShowResults --> UserChoice{ðŸ‘† User Choice}
        UserChoice -->|New Battle| SelectRappers
        UserChoice -->|View Leaderboard| ViewLeaderboard[ðŸ† Leaderboard Page]
        UserChoice -->|Replay Turns| ReplayMode[ðŸ”„ Navigate Turn History]
        ReplayMode --> UserChoice
        ViewLeaderboard --> UserChoice
    end

    %% Styling
    classDef userAction fill:#4CAF50,stroke:#2E7D32,color:#fff
    classDef aiAction fill:#2196F3,stroke:#1565C0,color:#fff
    classDef decision fill:#FF9800,stroke:#E65100,color:#fff
    classDef result fill:#9C27B0,stroke:#6A1B9A,color:#fff

    class SelectRappers,EnterCustom,SelectHeadline,StartBattle userAction
    class GenerateVerse,ConvertTTS,JudgeDebate,DetermineWinner aiAction
    class ChooseTopic,AudioComplete,NextTurn,UserChoice decision
    class ShowResults,ViewLeaderboard,UpdateLeaderboard result
